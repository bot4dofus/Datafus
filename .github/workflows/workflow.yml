name: Workflow

on:
  workflow_dispatch:
  push:
    paths:
      - 'data/DofusInvoker.swf'
      - 'data/d2o/*'
      - 'data/d2i/*'
    branches:
      - master

jobs:
  Job_A:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Filter Job A
        uses: dorny/paths-filter@v2
        id: filter
        with:
          filters: |
            dofus_invoker:
              - 'data/DofusInvoker.swf'

      - name: Echo A
        if: (steps.filter.outputs.dofus_invoker == 'true') || (github.event_name == 'workflow_dispatch')
        run: |
          echo "This is Flow A"

  Job_B:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Filter Job C
        uses: dorny/paths-filter@v2
        id: filter
        with:
          filters: |
            d2o:
              - 'data/d2o/*'

      - name: Echo B
        if: (steps.filter.outputs.d2o == 'true') || (github.event_name == 'workflow_dispatch')
        run: |
          echo "This is Flow B"

  Job_C:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Filter Job C
        uses: dorny/paths-filter@v2
        id: filter
        with:
          filters: |
            d2i:
              - 'data/d2i/*'

      - name: Echo C
        if: (steps.filter.outputs.d2i == 'true') || (github.event_name == 'workflow_dispatch')
        run: |
          echo "This is Flow C"

  Publish_:
    runs-on: ubuntu-latest
    needs: [Job_A, Job_B, Job_C]

    steps:
      - name: Echo Publish
        run: |
          echo "This is Publish"
